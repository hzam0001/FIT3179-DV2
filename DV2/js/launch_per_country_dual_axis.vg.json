{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "How Has the Number of Countries Involved in Space Exploration Varied? (1957â€“2020)",
    "anchor": "middle",
    "fontSize": 16
  },
  "hconcat": [
    {
      "width": 1000,
      "height": 800,
      "data": {
        "url": "https://raw.githubusercontent.com/hzam0001/FIT3179-DV2/refs/heads/main/DV2/data/All_space_missions(2).csv"
      },
      "transform": [
        { "calculate": "toNumber(datum.Year)", "as": "YearNum" },
        { "filter": "datum.YearNum >= 1957 && datum.YearNum <= 2020" },
        {
          "aggregate": [
            { "op": "count", "as": "yearly_count" }
          ],
          "groupby": ["Country", "YearNum"]
        },
        {
          "joinaggregate": [
            { "op": "sum", "field": "yearly_count", "as": "total_count" }
          ],
          "groupby": ["Country"]
        },
        { "sort": [{ "field": "YearNum", "order": "ascending" }] }
      ],
      "layer": [
        {
          "mark": { "type": "line", "point": false, "interpolate": "monotone" },
          "encoding": {
            "x": {
              "field": "YearNum",
              "type": "quantitative",
              "title": "Year",
              "axis": { "format": "d", "tickCount": 14, "grid": false},
              "scale": { "domain": [1957, 2020] }
            },
            "y": {
              "field": "Country",
              "type": "nominal",
              "title": "Country",
              "axis": {
                "labelLimit": 260,
                "labelFontSize": 12,
                "grid": false,
                "ticks": false
              },
              "sort": { "field": "total_count", "order": "descending" }
            },
            "detail": { "field": "Country" },
            "color": { "field": "Country", "type": "nominal", "legend": null },
            "opacity": { "value": 0.65 }
          }
        },
        {
          "mark": { "type": "point", "filled": true, "size": 40 },
          "encoding": {
            "x": { "field": "YearNum", "type": "quantitative" },
            "y": {
              "field": "Country",
              "type": "nominal",
              "sort": { "field": "total_count", "order": "descending" }
            },
            "tooltip": [
              { "field": "Country", "type": "nominal", "title": "Country" },
              { "field": "YearNum", "type": "quantitative", "title": "Year", "format": "d" },
              { "field": "yearly_count", "type": "quantitative", "title": "Missions this year", "format": "," }
            ],
            "color": { "field": "Country", "type": "nominal", "legend": null }
          }
        }
      ]
    },

    {
      "width": 100,
      "height": 800,
      "title": {
        "text": "Number of Missions",
        "align": "left",
        "fontSize": 12,
        "fontWeight": "normal",
        "offset": 0,
        "anchor": "start"
      },
      "data": {
        "url": "https://raw.githubusercontent.com/hzam0001/FIT3179-DV2/refs/heads/main/DV2/data/All_space_missions.csv"
      },
      "transform": [
        { "calculate": "toNumber(datum.Year)", "as": "YearNum" },
        { "filter": "datum.YearNum >= 1957 && datum.YearNum <= 2020" },
        {
          "aggregate": [
            { "op": "count", "as": "total_count" }
          ],
          "groupby": ["Country"]
        }
      ],
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 5,
        "fontSize": 12,
        "fontWeight": 600,
        "color": "#111"
      },
      "encoding": {
        "y": {
          "field": "Country",
          "type": "nominal",
          "axis": {
            "orient": "left",
            "labels": false,
            "ticks": false,
            "title": null,
            "domain": true,
            "domainColor": "#333",
            "domainWidth": 1
          },
          "sort": { "field": "total_count", "order": "descending" }
        },
        "x": { "value": 0 },
        "text": { "field": "total_count", "type": "quantitative", "format": "," }
      }
    }
  ],

  "resolve": {
    "scale": { "y": "shared" }
  },

  "config": {
    "view": { "stroke": "transparent" },
    "axis": { "domain": true, "domainColor": "#333", "domainWidth": 1 },
    "title": { "anchor": "middle" }
  }
}